<style>
/* Filter Section Container */
.filter-section {
  background: #ffffff;
  border-radius: 12px;
  padding: 1.5rem 2rem;
  margin: 1rem auto 0rem auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
  border: 1px solid #f0f0f0;

  display: flex;                /* make container flex */
  justify-content: center;      /* center the whole form */
}

/* Optional section header style */
.filter-header {
  font-size: 1rem;
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 1.25rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #f0f0f0;
}

.filter-form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* flexible columns */
  gap: 1rem;
  align-items: center;
  max-width: 1100px;
  width: 100%;
}


/* Label + input alignment */
.grid-item {
  display: flex;
  flex-direction: column;  /* label above input */
  align-items: flex-start; /* left align contents */
}

.grid-item label {
  font-weight: 600;      /* makes it bold but not too heavy */
  font-size: 0.9rem;     /* slightly smaller than normal text */
  color: #2c3e50;        /* dark, readable color */
  margin-bottom: 0.4rem; /* space between label and input */
  text-transform: uppercase; /* optional: makes it look structured */
  letter-spacing: 0.5px; /* optional: adds modern spacing */
}


/* Input & select base styling */
.filter-form-grid .grid-item input,
.filter-form-grid .grid-item select {
  width: 100%;
  border-radius: 8px;
  padding: 0.6rem 1rem;
  font-size: 0.9rem;
  height: 44px;
  border: 1px solid #dcdcdc;
  background-color: #ffffff;
  transition: all 0.2s ease;
}

/* Focus styling */
.filter-form-grid .grid-item input:focus,
.filter-form-grid .grid-item select:focus {
  outline: none;
  border-color: #0d6efd;
  box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.15);
}

/* Active filter styling (for select & date inputs) */
.filter-section .form-select.active-filter,
.filter-section input[type="date"].active-filter {
  border: 2px solid #0d6efd;
  background-color: #e9f3ff;
  color: #0d6efd;
  font-weight: 600;
}

/* Responsive breakpoints */
@media (max-width: 992px) {
  .filter-form-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 576px) {
  .filter-form-grid {
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }
}
</style>

<div class="filter-section">
  <form method="get" class="filter-form-grid">

    <div class="grid-item">
      <label for="search-input"><span class="icon">&#128269;</span> Search P.O:</label>
      <input type="text" 
             name="search" 
             id="search-input"
             class="form-control" 
             placeholder="Enter P.O..." 
             autocomplete="off" 
             value="{{ search_query }}"
             data-list="purchase-orders-list"> 
      <datalist id="purchase-orders-list">
        {% for po_number in po_numbers_list %}
            <option value="{{ po_number }}">
        {% endfor %}
      </datalist>
    </div>

    <div class="grid-item">
      <label for="customer">Filter Customer</label>
      <select name="customer" id="customer"
              class="form-select {% if selected_customer %}active-filter{% endif %}" 
              onchange="this.form.submit()">
        <option value="">All Customers</option>
        {% for name in customer_list %}
          <option value="{{ name }}" {% if selected_customer == name %}selected{% endif %}>{{ name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="grid-item">
      <label for="date_started">Filter Started Date</label>
      <input type="date" 
             name="date_started" 
             id="date_started"
             class="form-control {% if selected_started %}active-filter{% endif %}"
             value="{{ selected_started|default:'' }}"
             onchange="this.form.submit()">
    </div>

    <div class="grid-item">
      <label for="target_date">Filter Target Date</label>
      <input type="date" 
            name="target_date" 
            id="target_date"
            class="form-control {% if selected_target %}active-filter{% endif %}"
            value="{{ selected_target|default:'' }}"
            onchange="this.form.submit()">
    </div>

    <div class="grid-item">
      <label for="status">Filter Status</label>
      <select name="status" id="status"
              class="form-select {% if selected_status %}active-filter{% endif %}" 
              onchange="this.form.submit()">
        <option value="">All Statuses</option>
        <option value="Pending" {% if selected_status == 'Pending' %}selected{% endif %}>Pending</option>
        <option value="Ongoing" {% if selected_status == 'Ongoing' %}selected{% endif %}>Ongoing</option>
        <option value="Completed" {% if selected_status == 'Completed' %}selected{% endif %}>Completed</option>
        <option value="Delayed" {% if selected_status == 'Delayed' %}selected{% endif %}>Delayed</option>
        <option value="Cancelled" {% if selected_status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
      </select>
    </div>

  </form>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('search-input');
        const datalistId = searchInput.getAttribute('data-list');

        // Initially, the list attribute is not set
        // so no suggestions will show on focus.

        searchInput.addEventListener('input', function() {
            // Check if the input field has any text
            if (this.value.length > 0) {
                // If there's text, add the list attribute
                this.setAttribute('list', datalistId);
            } else {
                // If the input is empty, remove the list attribute
                this.removeAttribute('list');
            }
        });
    });
</script>

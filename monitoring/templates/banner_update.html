<script>
  const BANNER_VERSION = 'v1.1';
  const storageKey = `update_banner_${BANNER_VERSION}_dismissed`;
</script>

<div id="update-banner" 
     class="alert alert-info alert-dismissible fade show mb-4 p-3" 
     role="alert" style="font-size: 1.1rem; line-height: 1.6;">
  
  <strong style="font-size: 1.3rem;">ðŸ“¢ Updates v1.1:</strong>
  <ul style="margin-top: 0.5rem; padding-left: 1.2rem;">
    <li><b>Amount</b> â€” now required when adding P.O</li>
    <li><b>PMS Number</b> & <b>Picture Status</b> â€” now in Update P.O</li>
    <li>Manpower names can include spaces</li>
    <li>Tracking logs for changes in start, target & completion dates in <b>View P.O</b></li>
    <li>Print now available for View P.O & Itinerary Details</li>
  </ul>

  <div style="margin-top: 1rem; font-size: 1rem; color: #555;">
    ðŸ›ˆ Click the <b>Ã—</b> in the top right corner to close this message.
  </div>

  <button type="button" class="close" aria-label="Close" onclick="dismissBanner()" style="font-size: 2rem;">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<script>
  const banner = document.getElementById('update-banner');
  const bannerTitle = document.getElementById('banner-title');

  if (bannerTitle) {
    bannerTitle.textContent = `ðŸš€ What's New in ${BANNER_VERSION}:`;
  }

  if (localStorage.getItem(storageKey) === 'true') {
    banner.style.display = 'none';
  }

  function dismissBanner() {
    localStorage.setItem(storageKey, 'true');
    banner.style.display = 'none';
  }
</script>

{% if request.user.is_superuser %}
  <div class="mb-3">
    <button onclick="resetBanner()" class="btn btn-sm btn-warning">
      ðŸ”„ Reset Banner (Dev)
    </button>
  </div>

  <script>
    function resetBanner() {
      localStorage.removeItem(storageKey);
      location.reload();
    }
  </script>
{% endif %}

